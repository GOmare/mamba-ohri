USE recency_uganda_prod_analysis_test
GO

DROP TABLE IF EXISTS base.fact_cqi_assessment;

-- $BEGIN

CREATE TABLE [base].[fact_cqi_assessment] (
    [cqi_assessment_id] UNIQUEIDENTIFIER NOT NULL PRIMARY KEY,
    [form_version] VARCHAR(2) NOT NULL,
    [uri] NVARCHAR(255) ,
    [form_start_date_time] NVARCHAR(255) NULL,
    [form_end_date_time] NVARCHAR(255) NULL,
    [form_date] NVARCHAR(255) NULL,
    [visit_date] NVARCHAR(255) NULL,
    [region] NVARCHAR(255) NULL,
    [district] NVARCHAR(255) NULL,
    visit_number INT NULL,
    reversed_visit_number INT NULL,
    is_latest_visit TINYINT NULL,
    cx_study_staff_score DECIMAL(10,4) NULL,
    ss_prop_of_trained_hts_providers DECIMAL(10,4) NULL,
    ss_prop_of_trained_hts_providers_available_during_visit DECIMAL(10,4) NULL,
    ss_prop_of_hts_providers_trained_on_hiv_rapid_testing DECIMAL(10,4) NULL,
    cx_procedures_score DECIMAL(10,4) NULL,
    cx_source_data_score DECIMAL(10,4) NULL,
    sd_prop_of_complete_records_in_logbook DECIMAL(10,4) NULL,
    sd_prop_of_complete_records_with_kit_details DECIMAL(10,4) NULL,
    sd_prop_of_shipment_forms_completely_filled DECIMAL(10,4) NULL,
    cx_physical_facility_score DECIMAL(10,4) NULL,
    cx_participant_recruitment_score DECIMAL(10,4) NULL,
    prf_prop_of_enrolled_clients_in_rtri DECIMAL(10,4) NULL,
    prf_prop_of_enrolled_clients_in_rtri_with_consent_doc DECIMAL(10,4) NULL,
    cx_site_supplies_score DECIMAL(10,4) NULL,
    [assessment_point] NVARCHAR(255) NULL,
    [assessment_point_other] NVARCHAR(255) NULL,
    [review_period_start] DATE NULL,
    [review_period_end] DATE NULL,
    [visitor_name] NVARCHAR(255) NULL,
    [visitor_name_other] NVARCHAR(255) NULL,
    [ss_total_hts_providers] INT NULL,
    [ss_number_of_hts_providers_trained] INT NULL,
    [ss_hts_providers_trained_comments] NVARCHAR(255) NULL,
    [ss_number_of_hts_providers_trained_available] INT NULL,
    [ss_number_provider_available_at_point] INT NULL,
    [ss_number_provider_trained_on_routine_hts] INT NULL,
    [ss_number_of_hts_providers_trained_working] INT NULL,
    [ss_number_of_hts_providers_trained_by_cme]INT NULL,
    [ss_hts_providers_follow_sops_for_eligibility] INT NULL,
    [ss_hts_providers_follow_sops_for_eligibilit_comment] NVARCHAR(255) NULL,
    [ss_hts_providers_follow_sops_for_testing] INT NULL,
    [ss_hts_providers_follow_sops_for_testing_comment] NVARCHAR(255) NULL,
    [ss_hts_providers_interpret_results_accurately] INT NULL,
    [ss_hts_providers_interpret_results_accurately_comment] NVARCHAR(255) NULL,
    [ss_all_tests_with_control_and_verification_line_marked_recent] INT NULL,
    [ss_all_tests_with_control_and_verification_line_marked_recent_comment] NVARCHAR(255) NULL,
    [ss_all_tests_with_three_lines_marked_long_term] INT NULL,
    [ss_all_tests_with_three_lines_marked_long_term_comment] NVARCHAR(255) NULL,
    [ss_all_tests_with_only_control_line_marked_negative] INT NULL,
    [ss_all_tests_with_only_control_line_marked_negative_comment] NVARCHAR(255) NULL,
    [ss_all_invalid_tests_interpreted_correctly] INT NULL,
    [ss_all_invalid_tests_interpreted_correctly_comment] NVARCHAR(255) NULL,
    [ss_docs_showing_all_hts_providers_trained_in_routine_rapid_testing] INT NULL,
    [ss_docs_showing_all_hts_providers_trained_in_routine_rapid_testing_comment] NVARCHAR(255) NULL,
    [ss_docs_showing_all_hts_providers_trained_in_rtri_testing] INT NULL,
    [ss_docs_showing_all_hts_providers_trained_in_rtri_testing_comment] NVARCHAR(255) NULL,
    [ss_hts_performed_in_private_space] INT NULL,
    [ss_hts_performed_in_private_space_comment] NVARCHAR(255) NULL,
    [ss_any_recency_trained_staff_changes_since_training] INT NULL,
    [ss_any_recency_trained_staff_changes_since_training_comment] NVARCHAR(255) NULL,
    [ss_score_denominator] NVARCHAR(255) NULL,
    [ss_score] NVARCHAR(255) NULL,
    [procedures_sop_manual_visible_at_facility_location] INT NULL,
    [procedures_sop_manual_visible_at_facility_location_comment] NVARCHAR(255) NULL,
    [procedures_informed_consent_materials_easily_physically_accessible] INT NULL,
    [procedures_informed_consent_materials_easily_physically_accessible_comment] NVARCHAR(255) NULL,
    [procedures_rtri_conducted_correctly] INT NULL,
    [procedures_rtri_conducted_correctly_comment] NVARCHAR(255) NULL,
    [procedures_sample_buffer_tube_labeled_with_client_identifiers] INT NULL,
    [procedures_sample_buffer_tube_labeled_with_client_identifiers_comment] NVARCHAR(255) NULL,
    [procedures_timers_available_and_used_routinely_for_rtri] INT NULL,
    [procedures_timers_available_and_used_routinely_for_rtri_comment] NVARCHAR(255) NULL,
    [procedures_sop_followed_for_rtri] INT NULL,
    [procedures_sop_followed_for_rtri_comment] NVARCHAR(255) NULL,
    [procedures_repeat_testing_of_invalid_tests_done] INT NULL,
    [procedures_repeat_testing_of_invalid_tests_done_comment] NVARCHAR(255) NULL,
    [procedures_specimen_collection_timely] INT NULL,
    [procedures_specimen_collection_timely_comment] NVARCHAR(255) NULL,
    [procedures_qc_for_positive_and_negative_routinely_used] INT NULL,
    [procedures_qc_for_positive_and_negative_routinely_used_comment] NVARCHAR(255) NULL,
    [procedures_recency_pt_performed_by_hts_providers] INT NULL,
    [procedures_recency_pt_performed_by_hts_providers_comment] NVARCHAR(255) NULL,
    [procedures_samples_prepared_according_to_schedule] INT NULL,
    [procedures_samples_prepared_according_to_schedule_comment] NVARCHAR(255) NULL,
    [procedures_electronic_data_entry_done_weekly] INT NULL,
    [procedures_electronic_data_entry_done_weekly_comment] NVARCHAR(255) NULL,
    [procedures_corrective_action_taken_in_sop_failure_taken] INT NULL,
    [procedures_corrective_action_taken_in_sop_failure_taken_comment] NVARCHAR(255) NULL,
    [procedures_score_denominator] INT NULL,
    [procedures_score] NVARCHAR(255) NULL,
    [sd_number_records_in_logbook] INT NULL,
    [sd_number_records_in_logbook_comment] NVARCHAR(255) NULL,
    [sd_number_records_in_logbook_rtri_complete] INT NULL,
    [sd_number_records_in_logbook_rtri_complete_comment] NVARCHAR(255) NULL,
    [sd_number_records_with_complete_hts_id] INT NULL,
    [sd_number_records_with_complete_hts_id_comment] NVARCHAR(255) NULL,
    [sd_number_records_in_logbook_with_complete_kit_details] INT NULL,
    [sd_number_records_in_logbook_with_complete_kit_details_comment] NVARCHAR(255) NULL,
    [sd_total_specimen_shipment_forms_created] INT NULL,
    [sd_total_specimen_shipment_forms_created_comment] NVARCHAR(255) NULL,
    [sd_total_specimens_in_shipment_forms] INT NULL,
    [sd_total_specimens_in_shipment_forms_comment] NVARCHAR(255) NULL,
    [sd_total_pages_with_client_records] INT NULL,
    [sd_total_lab_specimen_eligible_for_shipment] INT NULL,
    [sd_total_specimen_records] INT NULL,
    [sd_total_specimens_in_shipment_forms_completely_filled] INT NULL,
    [sd_total_specimens_in_shipment_forms_completely_filled_comment] NVARCHAR(255) NULL,
    [sd_only_standard_hts_forms_used] INT NULL,
    [sd_only_standard_hts_forms_used_comment] NVARCHAR(255) NULL,
    [sd_hts_forms_correctly_filled] INT NULL,
    [sd_hts_forms_correctly_filled_comment] NVARCHAR(255) NULL,
    [sd_all_hts_register_demographics_and_rtri_results_correctly_filled] INT NULL,
    [sd_all_hts_register_demographics_and_rtri_results_correctly_filled_comment] NVARCHAR(255) NULL,
    [sd_all_logbooks_correctly_filled_with_kit_details_and_rtri_results] INT NULL,
    [sd_all_logbooks_correctly_filled_with_kit_details_and_rtri_results_comment] NVARCHAR(255) NULL,
    [sd_all_records_in_hts_register_have_hts_history] INT NULL,
    [sd_all_records_in_hts_register_have_hts_history_comment] NVARCHAR(255) NULL,
    [sd_all_records_in_hts_register_have_final_hts_diagnosis] INT NULL,
    [sd_all_records_in_hts_register_have_final_hts_diagnosis_comment] NVARCHAR(255) NULL,
    [sd_prop_of_records_complete_with_hts_id] DECIMAL(10,4) NULL,
    [sd_prop_of_samples_shipped_to_hub] DECIMAL(10,4) NULL,
    [sd_score_denominator] NVARCHAR(255) NULL,
    [sd_score] NVARCHAR(255) NULL,
    [pf_sufficient_lighting_in_testing_area] INT NULL,
    [pf_sufficient_lighting_in_testing_area_comment] NVARCHAR(255) NULL,
    [pf_kits_stored_according_to_instructions] INT NULL,
    [pf_kits_stored_according_to_instructions_comment] NVARCHAR(255) NULL,
    [pf_current_and_past_temperature_charts_available] INT NULL,
    [pf_current_and_past_temperature_charts_available_comment] NVARCHAR(255) NULL,
    [pf_records_stored_in_secure_storage_room] INT NULL,
    [pf_records_stored_in_secure_storage_room_comment] NVARCHAR(255) NULL,
    [pf_all_electronic_tools_password_protected] INT NULL,
    [pf_all_electronic_tools_password_protected_comment] NVARCHAR(255) NULL,
    [pf_score_denominator] NVARCHAR(255) NULL,
    [pf_score] NVARCHAR(255) NULL,
    [prf_total_15_and_above_received_hts] INT NULL,
    [prf_total_15_and_above_received_hts_comment] NVARCHAR(255) NULL,
    [prf_total_clients_eligible] INT NULL,
    [prf_total_clients_eligible_comment] NVARCHAR(255) NULL,
    [prf_total_clients_enrolled_for_rtri] INT NULL,
    [prf_total_clients_enrolled_for_rtri_comment] NVARCHAR(255) NULL,
    [prf_total_clients_ineligible] INT NULL,
    [prf_total_clients_ineligible_comment] NVARCHAR(255) NULL,
    [prf_total_clients_enrolled_for_rtri_with_correct_consent_doc] INT NULL,
    [prf_total_clients_enrolled_for_rtri_with_correct_consent_doc_comment] NVARCHAR(255) NULL,
    [prf_total_15_and_above_tested_recent] INT NULL,
    [prf_total_15_and_above_tested_recent_comment] NVARCHAR(255) NULL,
    [prf_total_15_and_above_tested_long_term] INT NULL,
    [prf_total_15_and_above_tested_long_term_comment] NVARCHAR(255) NULL,
    [prf_total_clients_enrolled_for_rtri_repoering_adverse_events] INT NULL,
    [prf_total_clients_enrolled_for_rtri_repoering_adverse_events_comment] NVARCHAR(255) NULL,
    [prf_score_denominator] NVARCHAR(255) NULL,
    [prf_score] NVARCHAR(255) NULL,
    [site_supplies_asante_test_kits_available] INT NULL,
    [site_supplies_asante_test_kits_available_comment] NVARCHAR(255) NULL,
    [site_supplies_specimen_shipment_forms_available] INT NULL,
    [site_supplies_specimen_shipment_forms_available_comment] NVARCHAR(255) NULL,
    [site_supplies_samples_shipped] INT NULL,
    [site_supplies_samples_shipped_comment] NVARCHAR(255) NULL,
    [site_supplies_samples_shipped_rejected] INT NULL,
    [site_supplies_samples_shipped_rejected_comment] NVARCHAR(255) NULL,
    [site_supplies_logbooks_available] INT NULL,
    [site_supplies_logbooks_available_comment] NVARCHAR(255) NULL,
    [site_supplies_all_rtri_supplies_available] INT NULL,
    [site_supplies_all_rtri_supplies_available_comment] NVARCHAR(255) NULL,
    [site_supplies_asante_test_kits_available_and_stocked] INT NULL,
    [site_supplies_asante_test_kits_available_and_stocked_comment] NVARCHAR(255) NULL,
    [site_supplies_ppt_edta_tubes_available] INT NULL,
    [site_supplies_ppt_edta_tubes_available_comment] NVARCHAR(255) NULL,
    [site_supplies_rtri_supplies_used_before_expiry] INT NULL,
    [site_supplies_rtri_supplies_used_before_expiry_comment] NVARCHAR(255) NULL,
    [site_supplies_score_denominator] NVARCHAR(255) NULL,
    [site_supplies_score] NVARCHAR(255) NULL,
	[facility_id] UNIQUEIDENTIFIER NULL,
    FOREIGN KEY (facility_id) REFERENCES base.dim_facility (facility_id)
);
-- $END